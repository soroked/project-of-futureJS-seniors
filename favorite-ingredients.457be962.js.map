{"mappings":"gfAAAA,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,sOCAzD,IAAAC,EAAAJ,EAAA,S,6CCAAK,EAAiBL,EAAA,SAAAM,aAA6C,SAAWN,EAAA,SAAAO,QAA6C,SDetH,IAAMC,EAAO,IAAAC,IAAAJ,GAKN,SAASK,EAAeC,IAT/B,SAAwBA,GACtB,OAAOP,EAAAQ,QAAMC,IAAIC,oDAAkC,GAAWC,OAARJ,G,EAStDK,CAAeL,GAASM,MAAK,SAAAC,GAE3B,IAEUC,EAFNC,EACIlB,KAAKC,MAAMkB,aAAaC,QAAQ,eAAiB,GAEnDH,GAAwBC,aAAA,EAAAA,EAAiBG,MACvC,SAAAC,G,OAAQA,EAAKC,MAAQP,EAAKQ,KAAK,GAAGD,G,KAEhC,uBACA,kBAEV,IAAME,EAA0BC,EAAAC,OAAqB,mMAOnCd,OAHAG,EAAKQ,KAAK,GAAGI,MACd,kGAMCf,OAJAG,EAAKQ,KAAK,GAAGK,KACd,sNAIUhB,OADTG,EAAKQ,KAAK,GAAGI,MACd,YAICf,OAJSG,EAAKQ,KAAK,GAAGM,YAAY,mNASfjB,OALnBG,EAAKQ,KAAK,GAAGK,KACd,uNAQChB,OAJmBG,EAAKQ,KAAK,GAAGO,QAAQ,kMASxClB,OALAG,EAAKQ,KAAK,GAAGQ,IACd,uLAWCnB,OAPAG,EAAKQ,KAAK,GAAGS,QACd,+MAOGpB,OADFG,EAAKQ,KAAK,GAAGD,IACd,KAKPV,OALUI,EAAsB,4TAMjCJ,OADCP,EAAQ4B,SA3DR,UA4DD,qHAKTT,EAAwBU,OAExB,IAAIC,EAAOpC,KAAKC,MAAMkB,aAAaC,QAAQ,eAAiB,GAE9CgB,WAAMf,MAAK,SAAAC,G,OAAQA,EAAKC,MAAQP,EAAKQ,KAAK,GAAGD,G,IAI3D,IAAMc,EAAgBC,SAASC,cAAc,6BAE7CF,EAAcG,iBAAiB,SAE/B,SAAkBC,GAChB,GACwB,WAAtBA,EAAEC,OAAOC,UACTF,EAAEC,OAAOE,UAAUC,SAAS,4BAC5B,CACA,IAAMC,EAAKL,EAAEC,OAAOK,QAAQC,MACtBC,EAAWjC,EAAKQ,KAAK,GAGrB0B,GAFNd,EAAOpC,KAAKC,MAAMkB,aAAaC,QAAQ,eAAiB,IAErC+B,WAAU,SAAA7B,G,OAAQA,EAAKC,MAAQuB,C,IAElD,GAAII,EAAQ,EAIV,OAHAd,EAAKgB,KAAKH,GACVZ,EAAcgB,UAAY,4BAC1BlC,aAAamC,QAAQ,YAAatD,KAAKuD,UAAUnB,IAGnDA,EAAKoB,OAAON,EAAO,GACnBb,EAAcgB,UAAY,kBAC1BlC,aAAamC,QAAQ,YAAatD,KAAKuD,UAAUnB,G,KAIvBE,SAASC,cACrC,6BADF,IAIMkB,EAAyBnB,SAASC,cACpC,8BAEImB,EAA0BpB,SAASC,cACvC,+BAEF,SAASoB,IACPlC,EAAwBmC,O,CAE1BH,EAAuBjB,iBAAiB,QAASmB,GACjDD,EAAwBlB,iBAAiB,QAASmB,E,IAIzBrB,SAASC,cAAc,wBAE/BC,iBAAiB,SAExC,SAAwBC,GACtB,GACwB,WAAtBA,EAAEC,OAAOC,UACTF,EAAEC,OAAOE,UAAUC,SAAS,cAE5B,OAEArC,EAAeiC,EAAEC,OAAOK,QAAQD,G","sources":["node_modules/@parcel/runtime-js/lib/runtime-b3e228fd9df1546b.js","src/js/main/modal-window-ingredient.js","node_modules/@parcel/runtime-js/lib/runtime-9206fdf15e389dc0.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"4cwSd\\\":\\\"favorite-ingredients.457be962.js\\\",\\\"d9SZC\\\":\\\"icons.35462022.svg\\\",\\\"bxWG5\\\":\\\"favorite-cocktail.1deacdfd.css\\\",\\\"i0yIm\\\":\\\"favorite-ingredients.a8f493d3.js\\\"}\"));","import axios from 'axios';\nconst BASE_URL = 'https://drinkify.b.goit.study/api/v1/';\nconst ENDPOINT_INGREDIENTS = 'ingredients/';\nimport { getCocktails } from '../swagger-api.js';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\nimport {\n  addToFavorites,\n  removeFromFavoritesByIndex,\n} from '../localstorage-fav-ingredients.js';\n\nfunction getIngredients(queryId) {\n  return axios.get(BASE_URL + ENDPOINT_INGREDIENTS + `${queryId}`);\n}\n\nconst iconOff = new URL('../../img/icons.svg#icon-x', import.meta.url);\nconst iconX = '#icon-x';\n\n// MODAL TEXT\n\nexport function modalIngidient(queryId) {\n  getIngredients(queryId).then(resp => {\n\n    let favsIngredients =\n            JSON.parse(localStorage.getItem('favorites')) || [];\n          let addOrDeleteIngredient = 'ADD TO FAVORITE';\n          addOrDeleteIngredient = favsIngredients?.some(\n            item => item._id === resp.data[0]._id\n          )\n            ? 'REMOVE FROM FAVORITE'\n            : 'ADD TO FAVORITE';\n    \n    const modalInstanceIngridient = basicLightbox.create(`\n                    <div class=\"modal-ingredient mw-modal-dark\">\n                    <div class=\"ingridient-card\">\n                    <h2 class=\"title-modal-ingridient mw-text-main-dark\">${\n                      resp.data[0].title\n                    }</h2>\n                    <p class=\"type-ingridient-modal-ingridient mw-text-secondary-dark\">${\n                      resp.data[0].type\n                    }</p>\n                    <div class=\"line mw-btn-dark\"> </div>\n                    <p class=\"paragraph-modal-ingridient mw-text-secondary-dark\"><span class=\"span-paragraph-modal-ingridient mw-text-main-dark\">${\n                      resp.data[0].title\n                    }</span> ${resp.data[0].description}</p>\n                    <ul class=\"list-modal-ingridients \">\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\">Type: ${\n                      resp.data[0].type\n                    }</p>\n                    </li>\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\">\n                    Country of origin: ${resp.data[0].country}</p>\n                    </li>\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\"> Alcohol by volume: ${\n                      resp.data[0].abv\n                    }</p>\n                    </li>\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\">Flavour: ${\n                      resp.data[0].flavour\n                    }</p>\n                    </li>\n                    </ul>\n                    </div>\n                    <div class=\"buttons\">\n                    <button class=\"add-btn-modal-ingridient\" data-value=${\n                      resp.data[0]._id\n                    }>${addOrDeleteIngredient}</button>\n                    <button class=\"back-btn-modal-ingridient mw-text-first-dark mw-btn-dark\">Back</button>\n                    </div>\n                    <button type=\"button\" class=\"modal-ingredient-close-btn\">\n            <svg class=\"icon-off mw-text-first-dark\" width=\"24\" height=\"24\"><use href=${\n              iconOff.pathname + iconX\n            }></use></svg>\n          </button>\n                    </div></div>\n                    \n                    `);\n    modalInstanceIngridient.show();\n\n    let favs = JSON.parse(localStorage.getItem('favorites')) || [];\n    let addOrDelete = 'ADD TO FAVORITE';\n    addOrDelete = favs?.some(item => item._id === resp.data[0]._id)\n      ? 'REMOVE FROM FAVORITE'\n      : 'ADD TO FAVORITE';\n\n    const addToFavorite = document.querySelector('.add-btn-modal-ingridient');\n\n    addToFavorite.addEventListener('click', onAddBtn);\n\n    function onAddBtn(e) {\n      if (\n        e.target.nodeName === 'BUTTON' ||\n        e.target.classList.contains('add-btn-modal-ingredient')\n      ) {\n        const id = e.target.dataset.value;\n        const cocktail = resp.data[0];\n        favs = JSON.parse(localStorage.getItem('favorites')) || [];\n\n        const index = favs.findIndex(item => item._id === id);\n\n        if (index < 0) {\n          favs.push(cocktail);\n          addToFavorite.innerHTML = 'REMOVE FROM FAVORITE';\n          localStorage.setItem('favorites', JSON.stringify(favs));\n          return;\n        }\n        favs.splice(index, 1);\n        addToFavorite.innerHTML = 'ADD TO FAVORITE';\n        localStorage.setItem('favorites', JSON.stringify(favs));\n      }\n    }\n\n    const addBtnModalIngridient = document.querySelector(\n      '.add-btn-modal-ingridient'\n    );\n\n    const backBtnModalIngridient = document.querySelector(\n        '.back-btn-modal-ingridient'\n      );\n      const modalIngredientCloseBtn = document.querySelector(\n        '.modal-ingredient-close-btn'\n      );\n      function modalCloseIngridient() {\n        modalInstanceIngridient.close();\n      }\n      backBtnModalIngridient.addEventListener('click', modalCloseIngridient);\n      modalIngredientCloseBtn.addEventListener('click', modalCloseIngridient);\n  });\n}\n\nconst ingredientGalleryModal = document.querySelector('.ingredients-gallery');\n\ningredientGalleryModal.addEventListener('click', onGalleryClick);\n\nfunction onGalleryClick(e) {\n  if (\n    e.target.nodeName !== 'BUTTON' ||\n    e.target.classList.contains('delete-btn')\n  ) {\n    return;\n  } else {\n    modalIngidient(e.target.dataset.id);\n  }\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('4cwSd') + require('./helpers/bundle-manifest').resolve(\"d9SZC\");"],"names":["parcelRequire","register","JSON","parse","$dIxxU","$932fb121580c2c0b$exports","getBundleURL","resolve","$37305f94ebd61480$var$iconOff","URL","$37305f94ebd61480$export$8b8ffcaa06093f03","queryId","default","get","$37305f94ebd61480$var$BASE_URL","concat","$37305f94ebd61480$var$getIngredients","then","resp","addOrDeleteIngredient","favsIngredients","localStorage","getItem","some","item","_id","data","modalInstanceIngridient","$dyT35","create","title","type","description","country","abv","flavour","pathname","show","favs","addToFavorite","document","querySelector","addEventListener","e","target","nodeName","classList","contains","id","dataset","value","cocktail","index","findIndex","push","innerHTML","setItem","stringify","splice","backBtnModalIngridient","modalIngredientCloseBtn","modalCloseIngridient","close"],"version":3,"file":"favorite-ingredients.457be962.js.map"}