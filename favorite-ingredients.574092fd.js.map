{"mappings":"oeAAAA,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,sOCAzD,IAAAC,EAAAJ,EAAA,S,gCCAAK,EAAiB,IAAAC,IAAoBN,EAAA,SAAAO,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WDW5F,MAAMC,EAAO,IAAAN,IAAAD,GAKN,SAASQ,EAAeC,IAT/B,SAAwBA,GACtB,OAAOV,EAAAW,QAAMC,IAAsC,oDAAGF,I,EAStDG,CAAeH,GAASI,MAAKC,IAC3B,IAAIC,EAAkBlB,KAAKC,MAAMkB,aAAaC,QAAQ,eAAiB,GACnEC,EAAwB,kBAC5BA,GAAwBH,aAAA,EAAAA,EAAiBI,MACvCC,GAAQA,EAAKC,MAAQP,EAAKQ,KAAK,GAAGD,OAEhC,uBACA,kBAEJ,MAAME,EAA0BC,EAAAC,OAAqB,mMAInCX,EAAKQ,KAAK,GAAGI,sGAGbZ,EAAKQ,KAAK,GAAGK,yNAIbb,EAAKQ,KAAK,GAAGI,gBACJZ,EAAKQ,KAAK,GAAGM,6NAItBd,EAAKQ,KAAK,GAAGK,0NAKMb,EAAKQ,KAAK,GAAGO,wMAIhCf,EAAKQ,KAAK,GAAGQ,yLAKbhB,EAAKQ,KAAK,GAAGS,qNAObjB,EAAKQ,KAAK,GAAGD,OACXH,4TAKVX,EAAQyB,SAzDR,6HA+DVT,EAAwBU,OAExB,IAAIC,EAAOrC,KAAKC,MAAMkB,aAAaC,QAAQ,eAAiB,GACxDkB,EAAc,kBAClBA,GAAcD,aAAA,EAAAA,EAAMf,MAAKC,GAAQA,EAAKC,MAAQP,EAAKQ,KAAK,GAAGD,OACvD,uBACA,kBAEJ,MAAMe,EAAgBC,SAASC,cAAc,6BAE7CF,EAAcG,iBAAiB,SAE/B,SAAkBC,GAChB,GACwB,WAAtBA,EAAEC,OAAOC,UACTF,EAAEC,OAAOE,UAAUC,SAAS,4BAC5B,CACA,MAAMC,EAAKL,EAAEC,OAAOK,QAAQC,MACtBC,EAAWlC,EAAKQ,KAAK,GAC3BY,EAAOrC,KAAKC,MAAMkB,aAAaC,QAAQ,eAAiB,GAExD,MAAMgC,EAAQf,EAAKgB,WAAU9B,GAAQA,EAAKC,MAAQwB,IAElD,GAAII,EAAQ,EAIV,OAHAf,EAAKiB,KAAKH,GACVZ,EAAcgB,UAAY,4BAC1BpC,aAAaqC,QAAQ,YAAaxD,KAAKyD,UAAUpB,IAGnDA,EAAKqB,OAAON,EAAO,GACnBb,EAAcgB,UAAY,kBAC1BpC,aAAaqC,QAAQ,YAAaxD,KAAKyD,UAAUpB,KACjD,EAAAsB,EAAAC,sBAAqB,Y,KAIKpB,SAASC,cACrC,6BADF,MAIMoB,EAAyBrB,SAASC,cACtC,8BAEIqB,EAA0BtB,SAASC,cACvC,+BAEF,SAASsB,IACPrC,EAAwBsC,O,CAE1BH,EAAuBnB,iBAAiB,QAASqB,GACjDD,EAAwBpB,iBAAiB,QAASqB,EAAqB,G,CAI5CvB,SAASC,cAAc,wBAE/BC,iBAAiB,SAExC,SAAwBC,GACtB,GACwB,WAAtBA,EAAEC,OAAOC,UACTF,EAAEC,OAAOE,UAAUC,SAAS,cAE5B,OAEApC,EAAegC,EAAEC,OAAOK,QAAQD,G","sources":["node_modules/@parcel/runtime-js/lib/runtime-a1d2b9d4c6ad6afa.js","src/js/main/modal-window-ingredient.js","node_modules/@parcel/runtime-js/lib/runtime-81377719e79deb95.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1pviD\\\":\\\"favorite-ingredients.574092fd.js\\\",\\\"hm5VY\\\":\\\"icons.35462022.svg\\\",\\\"bxWG5\\\":\\\"favorite-cocktail.39886373.css\\\",\\\"lYlXK\\\":\\\"favorite-ingredients.bcbe486f.js\\\"}\"));","import axios from 'axios';\nconst BASE_URL = 'https://drinkify.b.goit.study/api/v1/';\nconst ENDPOINT_INGREDIENTS = 'ingredients/';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\nimport { parseLocalIngredient } from '../favorite-ingredients.js';\n\nfunction getIngredients(queryId) {\n  return axios.get(BASE_URL + ENDPOINT_INGREDIENTS + `${queryId}`);\n}\n\nconst iconOff = new URL('../../img/icons.svg#icon-x', import.meta.url);\nconst iconX = '#icon-x';\n\n// MODAL TEXT\n\nexport function modalIngidient(queryId) {\n  getIngredients(queryId).then(resp => {\n    let favsIngredients = JSON.parse(localStorage.getItem('favorites')) || [];\n    let addOrDeleteIngredient = 'ADD TO FAVORITE';\n    addOrDeleteIngredient = favsIngredients?.some(\n      item => item._id === resp.data[0]._id\n    )\n      ? 'REMOVE FROM FAVORITE'\n      : 'ADD TO FAVORITE';\n\n    const modalInstanceIngridient = basicLightbox.create(`\n                    <div class=\"modal-ingredient mw-modal-dark\">\n                    <div class=\"ingridient-card\">\n                    <h2 class=\"title-modal-ingridient mw-text-main-dark\">${\n                      resp.data[0].title\n                    }</h2>\n                    <p class=\"type-ingridient-modal-ingridient mw-text-secondary-dark\">${\n                      resp.data[0].type\n                    }</p>\n                    <div class=\"line mw-btn-dark\"> </div>\n                    <p class=\"paragraph-modal-ingridient mw-text-secondary-dark\"><span class=\"span-paragraph-modal-ingridient mw-text-main-dark\">${\n                      resp.data[0].title\n                    }</span> ${resp.data[0].description}</p>\n                    <ul class=\"list-modal-ingridients \">\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\">Type: ${\n                      resp.data[0].type\n                    }</p>\n                    </li>\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\">\n                    Country of origin: ${resp.data[0].country}</p>\n                    </li>\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\"> Alcohol by volume: ${\n                      resp.data[0].abv\n                    }</p>\n                    </li>\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\">Flavour: ${\n                      resp.data[0].flavour\n                    }</p>\n                    </li>\n                    </ul>\n                    </div>\n                    <div class=\"buttons\">\n                    <button class=\"add-btn-modal-ingridient\" data-value=${\n                      resp.data[0]._id\n                    }>${addOrDeleteIngredient}</button>\n                    <button class=\"back-btn-modal-ingridient mw-text-first-dark mw-btn-dark\">Back</button>\n                    </div>\n                    <button type=\"button\" class=\"modal-ingredient-close-btn\">\n            <svg class=\"icon-off mw-text-first-dark\" width=\"24\" height=\"24\"><use href=${\n              iconOff.pathname + iconX\n            }></use></svg>\n          </button>\n                    </div></div>\n                    \n                    `);\n    modalInstanceIngridient.show();\n\n    let favs = JSON.parse(localStorage.getItem('favorites')) || [];\n    let addOrDelete = 'ADD TO FAVORITE';\n    addOrDelete = favs?.some(item => item._id === resp.data[0]._id)\n      ? 'REMOVE FROM FAVORITE'\n      : 'ADD TO FAVORITE';\n\n    const addToFavorite = document.querySelector('.add-btn-modal-ingridient');\n\n    addToFavorite.addEventListener('click', onAddBtn);\n\n    function onAddBtn(e) {\n      if (\n        e.target.nodeName === 'BUTTON' ||\n        e.target.classList.contains('add-btn-modal-ingredient')\n      ) {\n        const id = e.target.dataset.value;\n        const cocktail = resp.data[0];\n        favs = JSON.parse(localStorage.getItem('favorites')) || [];\n\n        const index = favs.findIndex(item => item._id === id);\n\n        if (index < 0) {\n          favs.push(cocktail);\n          addToFavorite.innerHTML = 'REMOVE FROM FAVORITE';\n          localStorage.setItem('favorites', JSON.stringify(favs));\n          return;\n        }\n        favs.splice(index, 1);\n        addToFavorite.innerHTML = 'ADD TO FAVORITE';\n        localStorage.setItem('favorites', JSON.stringify(favs));\n        parseLocalIngredient('favorites');\n      }\n    }\n\n    const addBtnModalIngridient = document.querySelector(\n      '.add-btn-modal-ingridient'\n    );\n\n    const backBtnModalIngridient = document.querySelector(\n      '.back-btn-modal-ingridient'\n    );\n    const modalIngredientCloseBtn = document.querySelector(\n      '.modal-ingredient-close-btn'\n    );\n    function modalCloseIngridient() {\n      modalInstanceIngridient.close();\n    }\n    backBtnModalIngridient.addEventListener('click', modalCloseIngridient);\n    modalIngredientCloseBtn.addEventListener('click', modalCloseIngridient);\n  });\n}\n\nconst ingredientGalleryModal = document.querySelector('.ingredients-gallery');\n\ningredientGalleryModal.addEventListener('click', onGalleryClick);\n\nfunction onGalleryClick(e) {\n  if (\n    e.target.nodeName !== 'BUTTON' ||\n    e.target.classList.contains('delete-btn')\n  ) {\n    return;\n  } else {\n    modalIngidient(e.target.dataset.id);\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"hm5VY\")).toString();"],"names":["parcelRequire","register","JSON","parse","$2shzp","$c26f5e64986fd77d$exports","URL","resolve","import","meta","url","toString","$976fa7fb8bcc334f$var$iconOff","$976fa7fb8bcc334f$export$8b8ffcaa06093f03","queryId","default","get","$976fa7fb8bcc334f$var$getIngredients","then","resp","favsIngredients","localStorage","getItem","addOrDeleteIngredient","some","item","_id","data","modalInstanceIngridient","$9B8F0","create","title","type","description","country","abv","flavour","pathname","show","favs","addOrDelete","addToFavorite","document","querySelector","addEventListener","e","target","nodeName","classList","contains","id","dataset","value","cocktail","index","findIndex","push","innerHTML","setItem","stringify","splice","$bwD9F","parseLocalIngredient","backBtnModalIngridient","modalIngredientCloseBtn","modalCloseIngridient","close"],"version":3,"file":"favorite-ingredients.574092fd.js.map"}