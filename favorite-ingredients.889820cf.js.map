{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,yCAiBO,SAASC,EAAeC,IAN/B,SAAwBA,GACtB,OAAOH,EAAAI,QAAMC,IAAIC,oDAAkC,GAAWC,OAARJ,G,EAMtDK,CAAeL,GAASM,MAAK,SAAAC,GAE3B,IACIC,EADAC,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,eAAiB,GAE5DL,GAAcC,aAAA,EAAAA,EAAMK,MAAK,SAAAC,G,OAAQA,EAAKC,MAAQT,EAAKU,KAAK,GAAGD,G,KACvD,uBACA,kBAEJ,IAAME,EAA0BC,EAAAC,OAAqB,yMAIgChB,OADdG,EAAKU,KAAK,GAAGI,MAAM,kGAGqDjB,OAF1DG,EAAKU,KAAK,GAAGK,KAAK,sNAEqElB,OAA7BG,EAAKU,KAAK,GAAGI,MAAM,YAGjGjB,OAH2GG,EAAKU,KAAK,GAAGM,YAAY,mNAOhKnB,OAJ4BG,EAAKU,KAAK,GAAGK,KAAK,uNAOJlB,OAH1CG,EAAKU,KAAK,GAAGO,QAAQ,kMAMUpB,OAHWG,EAAKU,KAAK,GAAGQ,IAAI,uLAQrCrB,OALSG,EAAKU,KAAK,GAAGS,QAAQ,oMAKlBtB,OAAZI,EAAY,8MAKvEU,EAAwBS,OAExB,IAAMC,EAAgBC,SAASC,cAAc,6BAC7CF,EAAcG,iBAAiB,SAE/B,SAAkBC,GAEhB,GADAC,QAAQC,IAAI,OACc,WAAtBF,EAAEG,OAAOC,UAAyBJ,EAAEG,OAAOE,UAAUC,SAAS,4BAA6B,CAC/F,IAAMC,EAAKP,EAAEG,OAAOK,QAAQC,MACtBC,EAAWnC,EAAKU,KAAK,GAGrB0B,GAFNlC,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,eAAiB,IAErC+B,WAAU,SAAC7B,G,OAASA,EAAKC,MAAQuB,C,IAEpD,GAAII,EAAQ,EAIZ,OAHAlC,EAAKoC,KAAKH,GACVd,EAAckB,UAAY,4BAC1BlC,aAAamC,QAAQ,YAAarC,KAAKsC,UAAUvC,IAGjDA,EAAKwC,OAAON,EAAO,GACnBf,EAAckB,UAAY,kBAC1BlC,aAAamC,QAAQ,YAAarC,KAAKsC,UAAUvC,G,KAInD,IAAMyC,EAAyBrB,SAASC,cACtC,8BAE4BD,SAASC,cACrC,6BAGoBC,iBAAiB,SAAS,SAAAC,IAC9C,EAAAmB,EAAAC,gBAAe7C,EAAKU,KAAK,G,IAM3BiC,EAAuBnB,iBAAiB,SAHxC,WACEb,EAAwBmC,O,OAMCxB,SAASC,cAAc,wBAE/BC,iBAAiB,SAExC,SAAwBC,GACtB,GAA0B,WAAtBA,EAAEG,OAAOC,UAAyBJ,EAAEG,OAAOE,UAAUC,SAAS,cAClE,OAEEvC,EAAeiC,EAAEG,OAAOK,QAAQD,G","sources":["src/js/main/modal-window-ingredient.js"],"sourcesContent":["import axios from 'axios';\nconst BASE_URL = 'https://drinkify.b.goit.study/api/v1/';\nconst ENDPOINT_INGREDIENTS = 'ingredients/';\nimport { getCocktails } from '../swagger-api.js';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\nimport {\n  addToFavorites,\n  removeFromFavoritesByIndex,\n} from '../localstorage-fav-ingredients.js';\n\nfunction getIngredients(queryId) {\n  return axios.get(BASE_URL + ENDPOINT_INGREDIENTS + `${queryId}`);\n}\n\n// MODAL TEXT\n\nexport function modalIngidient(queryId) {\n  getIngredients(queryId).then(resp => {\n\n    let favs = JSON.parse(localStorage.getItem('favorites')) || [];\n    let addOrDelete = 'ADD TO FAVORITE';\n    addOrDelete = favs?.some(item => item._id === resp.data[0]._id)\n      ? 'REMOVE FROM FAVORITE'\n      : 'ADD TO FAVORITE';\n\n    const modalInstanceIngridient = basicLightbox.create(`\n                    <div class=\"modal modal-ingridient mw-modal-dark\">\n                    <div class=\"ingridient-card\">\n                    <h2 class=\"title-modal-ingridient mw-text-main-dark\">${resp.data[0].title}</h2>\n                    <p class=\"type-ingridient-modal-ingridient mw-text-secondary-dark\">${resp.data[0].type}</p>\n                    <div class=\"line mw-btn-dark\"> </div>\n                    <p class=\"paragraph-modal-ingridient mw-text-secondary-dark\"><span class=\"span-paragraph-modal-ingridient mw-text-main-dark\">${resp.data[0].title}</span> ${resp.data[0].description}</p>\n                    <ul class=\"list-modal-ingridients \">\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\">Type: ${resp.data[0].type}</p>\n                    </li>\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\">\n                    Country of origin: ${resp.data[0].country}</p>\n                    </li>\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\"> Alcohol by volume: ${resp.data[0].abv}</p>\n                    </li>\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\">Flavour: ${resp.data[0].flavour}</p>\n                    </li>\n                    </ul>\n                    </div>\n                    <div class=\"buttons\">\n                    <button class=\"add-btn-modal-ingridient\">${addOrDelete}</button>\n                    <button class=\"back-btn-modal-ingridient mw-text-main-dark mw-btn-dark \">Back</button>\n                    </div>\n                    </div></div>\n                    `);\n    modalInstanceIngridient.show();\n\n    const addToFavorite = document.querySelector('.add-btn-modal-ingridient');\n    addToFavorite.addEventListener('click', onAddBtn);\n\n    function onAddBtn(e) {\n      console.log('asd');\n      if (e.target.nodeName === 'BUTTON' || e.target.classList.contains('add-btn-modal-ingredient')) {\n      const id = e.target.dataset.value\n      const cocktail = resp.data[0];\n      favs = JSON.parse(localStorage.getItem('favorites')) || [];\n\n      const index = favs.findIndex((item) => item._id === id);\n      \n      if (index < 0) {\n      favs.push(cocktail);\n      addToFavorite.innerHTML = \"REMOVE FROM FAVORITE\";\n      localStorage.setItem('favorites', JSON.stringify(favs));\n      return;\n      }\n      favs.splice(index, 1);\n      addToFavorite.innerHTML = \"ADD TO FAVORITE\"\n      localStorage.setItem('favorites', JSON.stringify(favs));\n    }\n}\n\n    const backBtnModalIngridient = document.querySelector(\n      '.back-btn-modal-ingridient'\n    );\n    const addBtnModalIngridient = document.querySelector(\n      '.add-btn-modal-ingridient'\n    );\n\n    addBtnModalIngridient.addEventListener('click', e => {\n      addToFavorites(resp.data[0]);\n    });\n\n    function modalCloseIngridient() {\n      modalInstanceIngridient.close();\n    }\n    backBtnModalIngridient.addEventListener('click', modalCloseIngridient);\n  });\n}\n\nconst ingredientGalleryModal = document.querySelector('.ingredients-gallery')\n\ningredientGalleryModal.addEventListener('click', onGalleryClick)\n\nfunction onGalleryClick(e) {\n  if (e.target.nodeName !== \"BUTTON\" || e.target.classList.contains('delete-btn')) {\n  return\n  } else {\n    modalIngidient(e.target.dataset.id)\n}\n}"],"names":["$dIxxU","parcelRequire","$37305f94ebd61480$export$8b8ffcaa06093f03","queryId","default","get","$37305f94ebd61480$var$BASE_URL","concat","$37305f94ebd61480$var$getIngredients","then","resp","addOrDelete","favs","JSON","parse","localStorage","getItem","some","item","_id","data","modalInstanceIngridient","$dyT35","create","title","type","description","country","abv","flavour","show","addToFavorite","document","querySelector","addEventListener","e","console","log","target","nodeName","classList","contains","id","dataset","value","cocktail","index","findIndex","push","innerHTML","setItem","stringify","splice","backBtnModalIngridient","$6NpaF","addToFavorites","close"],"version":3,"file":"favorite-ingredients.889820cf.js.map"}