{"mappings":"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","sources":["src/js/main/modal-windows.js","node_modules/@parcel/runtime-js/lib/runtime-81377719e79deb95.js","node_modules/@parcel/runtime-js/lib/runtime-f2800230ef7012b1.js"],"sourcesContent":["import axios from 'axios';\nconst BASE_URL = 'https://drinkify.b.goit.study/api/v1/';\nconst ENDPOINT_INGREDIENTS = 'ingredients/';\nimport { getCocktails } from '../swagger-api.js';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\nimport {\n  addToFavorites,\n  removeFromFavoritesByIndex,\n} from '../localstorage-fav-ingredients.js';\n\nconst notifyMessage = document.querySelector(\".deleted-notify\");\n\nconst iconOff = new URL('../../img/icons.svg#icon-x', import.meta.url);\nconst iconX = '#icon-x';\n\nfunction getIngredients(queryId) {\n  return axios.get(BASE_URL + ENDPOINT_INGREDIENTS + `${queryId}`);\n}\n\n// MODAL TEXT\n\nlet abd = '';\n\nexport function modalInstanceCoctail(query) {\n  if (abd === query) {\n    return;\n  }\n  abd = query;\n\n  getCocktails(query).then(response => {\n    const ingridientsMarkup = response.data[0].ingredients\n      .map(\n        item =>\n          `<li class=\"item-modal-coctail-ingridients mw-text-third-dark\" data-value=${item.ingredientId}>\n                    <p class=\"link-modal-coctail-ingridient mw-text-third-dark\">\n                    ${item.title}\n                    </p>\n                    </li>`\n      )\n      .join('');\n\n    let favs = JSON.parse(localStorage.getItem('cocktails')) || [];\n    let addOrDelete = 'ADD TO FAVORITE';\n    addOrDelete = favs?.some(item => item._id === response.data[0]._id)\n      ? 'REMOVE FROM FAVORITE'\n      : 'ADD TO FAVORITE';\n\n    const modalInstanceCoctail = basicLightbox.create(\n      `\n                    <div class=\"modal-coctail mw-modal-dark\">\n                    <div class=\"photo-card-coctail dark-photo-card-coctail\">\n                    <div class=\"photo-info\">\n                    <img class=\"photo-coctail\" src=\"${response.data[0].drinkThumb}\" alt=\"\" title=\"\" height=\"277\" loading=\"lazy\"/>\n                    <div class=\"info-modal-coctail\">\n                    \n                    <h2 class=\"main-title-modal-coctail visually-hidden  mw-text-main-dark\">${response.data[0].drink}</h2>\n\n                    <p class=\"title-modal-coctail-categories mw-text-main-dark\">INGREDIENTS:</p>\n\n                    <p class=\"text-modal-coctail-type mw-text-secondary-dark\">Per cocktail</p>\n\n                    <ul class=\"list-modal-coctail-ingridients\">` +\n        ingridientsMarkup +\n        `</ul>\n                     </div></div>\n                    <p class=\"title-modal-coctail-categories mw-text-main-dark\">INSTRUCTIONS:</p>\n                    \n                    <p class=\"paragrapg-modal-coctail mw-text-secondary-dark\">\n                    ${response.data[0].instructions}\n                    </p>\n                    <div class=\"buttons\">\n                    <button class=\"add-btn-modal-coctail\" data-value=${\n                      response.data[0]._id\n                    }>${addOrDelete}</button>\n                    <button class=\"back-btn-modal-coctail mw-text-first-dark mw-btn-dark\">Back</button>\n                    </div>\n                    <button type=\"button\" class=\"modal-coctail-close-btn\">\n            <svg class=\"icon-off mw-text-first-dark\" width=\"24\" height=\"24\"><use href=${\n              iconOff.pathname + iconX\n            }></use></svg>\n          </button>\n                    </div>\n                    </div>\n                    `\n    );\n\n    // RENDER\n\n    modalInstanceCoctail.show();\n\n    // Add id for General modal window\n    const modal = document.querySelector('.basicLightbox');\n    modal.id = 'general';\n\n    const addToFavorite = document.querySelector('.add-btn-modal-coctail');\n    addToFavorite.addEventListener('click', onAddBtn);\n    const heartButton = document.querySelector('button-add-fav');\n\n    function onAddBtn(e) {\n      if (\n        e.target.nodeName === 'BUTTON' ||\n        e.target.classList.contains('add-button-modal-coctail')\n      ) {\n        const id = e.target.dataset.value;\n        const cocktail = response.data[0];\n        favs = JSON.parse(localStorage.getItem('cocktails')) || [];\n\n        const index = favs.findIndex(item => item._id === id);\n\n        if (index < 0) {\n          favs.push(cocktail);\n          addToFavorite.innerHTML = 'REMOVE FROM FAVORITE';\n          localStorage.setItem('cocktails', JSON.stringify(favs));\n          return;\n        }\n        favs.splice(index, 1);\n        addToFavorite.innerHTML = 'ADD TO FAVORITE';\n        localStorage.setItem('cocktails', JSON.stringify(favs));\n      }\n    }\n\n    const linkModalCoctail = document.querySelector(\n      '.list-modal-coctail-ingridients'\n    );\n\n    const backBtnModalCoctail = document.querySelector(\n      '.back-btn-modal-coctail'\n    );\n    const modalCoctailCloseBtn = document.querySelector(\n      '.modal-coctail-close-btn'\n    );\n    const modalCoctail = document.querySelector('.modal-coctail');\n\n    // RENDER INGREDIENTS\n    function handleLinkOpenModalIngridient(e) {\n      e.preventDefault();\n\n      if (\n        e.target.parentElement.classList.contains(\n          'item-modal-coctail-ingridients'\n        )\n      ) {\n        const queryId = e.target.closest('.item-modal-coctail-ingridients')\n          .dataset.value;\n\n        modalCoctail.classList.add('is-hidden-modal');\n\n        //   modal.style.background = '#0000';\n\n        getIngredients(queryId).then(resp => {\n\n          if (!resp.data[0].description || !resp.data[0].type) {\n                modalCloseCoctail()\n                showNotificationIngredient(resp.data[0].title);\n                return;\n              }\n\n          let favsIngredients =\n            JSON.parse(localStorage.getItem('favorites')) || [];\n          let addOrDeleteIngredient = 'ADD TO FAVORITE';\n          addOrDeleteIngredient = favsIngredients?.some(\n            item => item._id === resp.data[0]._id\n          )\n            ? 'REMOVE FROM FAVORITE'\n            : 'ADD TO FAVORITE';\n\n          const modalInstanceIngridient = basicLightbox.create(`\n                    <div class=\"modal-ingredient mw-modal-dark\">\n                    <div class=\"ingridient-card\">\n                    <h2 class=\"title-modal-ingridient mw-text-main-dark\">${\n                      resp.data[0].title\n                    }</h2>\n                    <p class=\"type-ingridient-modal-ingridient mw-text-secondary-dark\">${\n                      resp.data[0].type\n                    }</p>\n                    <div class=\"line mw-btn-dark\"> </div>\n                    <p class=\"paragraph-modal-ingridient mw-text-secondary-dark\"><span class=\"span-paragraph-modal-ingridient mw-text-main-dark\">${\n                      resp.data[0].title\n                    }</span> ${resp.data[0].description}</p>\n                    <ul class=\"list-modal-ingridients \">\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\">Type: ${\n                      resp.data[0].type\n                    }</p>\n                    </li>\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\">\n                    Country of origin: ${resp.data[0].country}</p>\n                    </li>\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\"> Alcohol by volume: ${\n                      resp.data[0].abv\n                    }</p>\n                    </li>\n                    <li class=\"item-modal-ingridients mw-text-third-dark\">\n                    <p class=\"text-modal mw-text-third-dark\">Flavour: ${\n                      resp.data[0].flavour\n                    }</p>\n                    </li>\n                    </ul>\n                    </div>\n                    <div class=\"buttons\">\n                    <button class=\"add-btn-modal-ingridient\" data-value=${\n                      resp.data[0]._id\n                    }>${addOrDeleteIngredient}</button>\n                    <button class=\"back-btn-modal-ingridient mw-text-first-dark mw-btn-dark\">Back</button>\n                    </div>\n                    <button type=\"button\" class=\"modal-ingredient-close-btn\">\n            <svg class=\"icon-off mw-text-first-dark\" width=\"24\" height=\"24\"><use href=${\n              iconOff.pathname + iconX\n            }></use></svg>\n          </button>\n                    </div></div>\n                    `);\n\n          modalInstanceIngridient.show();\n\n          const addToFavoriteIngredient = document.querySelector(\n            '.add-btn-modal-ingridient'\n          );\n          addToFavoriteIngredient.addEventListener('click', onAddBtnIngredient);\n          // const heartButton = document.querySelector('button-add-fav');\n\n          function onAddBtnIngredient(e) {\n            if (\n              e.target.nodeName === 'BUTTON' ||\n              e.target.classList.contains('add-btn-modal-ingridient')\n            ) {\n              const id = e.target.dataset.value;\n              const ingredient = resp.data[0];\n              favsIngredients =\n                JSON.parse(localStorage.getItem('favorites')) || [];\n\n              const index = favsIngredients.findIndex(item => item._id === id);\n\n              if (index < 0) {\n                favsIngredients.push(ingredient);\n                addToFavoriteIngredient.innerHTML = 'REMOVE FROM FAVORITE';\n                localStorage.setItem(\n                  'favorites',\n                  JSON.stringify(favsIngredients)\n                );\n                return;\n              }\n              favsIngredients.splice(index, 1);\n              addToFavoriteIngredient.innerHTML = 'ADD TO FAVORITE';\n              localStorage.setItem(\n                'favorites',\n                JSON.stringify(favsIngredients)\n              );\n              return;\n            }\n          }\n\n          const backBtnModalIngridient = document.querySelector(\n            '.back-btn-modal-ingridient'\n          );\n          const modalIngredientCloseBtn = document.querySelector(\n            '.modal-ingredient-close-btn'\n          );\n\n          const addBtnModalIngredient = document.querySelector(\n            '.add-btn-modal-ingridient'\n          );\n\n          // addBtnModalIngredient.addEventListener('click', e => {\n          //   addToFavorites(resp.data[0]);\n          // });\n\n          function modalCloseIngridient() {\n            modalInstanceIngridient.close();\n            modalCoctail.classList.remove('is-hidden-modal');\n            // modal.style.background = '#000c';\n          }\n          backBtnModalIngridient.addEventListener(\n            'click',\n            modalCloseIngridient\n          );\n          modalIngredientCloseBtn.addEventListener(\n            'click',\n            modalCloseIngridient\n          );\n        });\n      }\n    }\n\n    function modalCloseCoctail() {\n      modalInstanceCoctail.close();\n    }\n    linkModalCoctail.addEventListener('click', handleLinkOpenModalIngridient);\n    backBtnModalCoctail.addEventListener('click', modalCloseCoctail);\n    modalCoctailCloseBtn.addEventListener('click', modalCloseCoctail);\n  });\n}\n\nfunction showNotificationIngredient(item) {\n\n    notifyMessage.textContent = `На жаль дані тимчасово відсутні: ${item}`\n\n    notifyMessage.classList.remove(\"is-hidden-favorite\");\n\n    setTimeout(() => {\n      notifyMessage.classList.add(\"is-hidden-favorite\");\n    }, 2000);\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"hm5VY\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2KzFz\\\":\\\"index.9f493389.js\\\",\\\"5UbS1\\\":\\\"favorite-cocktail.603e9e5d.css\\\",\\\"hm5VY\\\":\\\"icons.35462022.svg\\\"}\"));"],"names":["$2shzp","parcelRequire","$6d1c8dd0cb4ec7e4$var$notifyMessage","document","querySelector","$6d1c8dd0cb4ec7e4$var$iconOff","URL","$6d1c8dd0cb4ec7e4$var$iconX","$6d1c8dd0cb4ec7e4$var$abd","$6d1c8dd0cb4ec7e4$export$90e74466ecafc0a2","query","$b2XdZ","getCocktails","then","response","ingridientsMarkup","data","ingredients","map","item","ingredientId","title","join","favs","JSON","parse","localStorage","getItem","addOrDelete","some","_id","modalInstanceCoctail1","$9B8F0","create","drinkThumb","drink","instructions","pathname","show","id","addToFavorite","addEventListener","e","target","nodeName","classList","contains","dataset","value","cocktail","index","findIndex","push","innerHTML","setItem","stringify","splice","linkModalCoctail","backBtnModalCoctail","modalCoctailCloseBtn","modalCoctail","modalCloseCoctail","close","e1","preventDefault","parentElement","queryId","closest","add","default","get","$6d1c8dd0cb4ec7e4$var$getIngredients","resp","description","type","textContent","remove","setTimeout","favsIngredients","addOrDeleteIngredient","modalInstanceIngridient","country","abv","flavour","addToFavoriteIngredient","ingredient","backBtnModalIngridient","modalIngredientCloseBtn","modalCloseIngridient","module","exports","resolve","import","meta","url","toString","register"],"version":3,"file":"index.9f493389.js.map"}